{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst flatpickrOptions = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    timeForTimer = selectedDates[0].getTime() - Date.now();\n\n    if (timeForTimer < 0) {\n      btnStartTimer.disabled = true;\n\n      iziToast.error({\n        message: 'Please choose a date in the future',\n        messageColor: '#ffffff',\n        backgroundColor: 'red',\n        close: false,\n        position: 'topRight',\n      });\n      return;\n    }\n\n    btnStartTimer.disabled = false;\n    userSelectedDate = selectedDates[0];\n  },\n};\n\nconst dateInputEl = document.querySelector('#datetime-picker');\nconst btnStartTimer = document.querySelector('.input-button > button');\nconst textValue = document.querySelectorAll('.timer .value');\n\nbtnStartTimer.addEventListener('click', startTimer);\n\nbtnStartTimer.disabled = true;\n\nlet userSelectedDate = 0;\nlet timeForTimer = 0;\nlet time;\nlet diffTime;\nlet dataTime;\n\nflatpickr(dateInputEl, flatpickrOptions);\n\nconst addLeadingZero = value => {\n  textValue[0].textContent = String(value.days).padStart(2, '0');\n  textValue[1].textContent = String(value.hours).padStart(2, '0');\n  textValue[2].textContent = String(value.minutes).padStart(2, '0');\n  textValue[3].textContent = String(value.seconds).padStart(2, '0');\n};\n\nfunction startTimer(event) {\n  time = Date.now();\n  diffTime = userSelectedDate - time;\n  dataTime = convertMs(diffTime);\n\n  addLeadingZero(dataTime);\n\n  dateInputEl.disabled = true;\n  btnStartTimer.disabled = true;\n\n  const timerId = setInterval(() => {\n    time = Date.now();\n    diffTime = userSelectedDate - time;\n\n    if (Math.floor(diffTime / 1000) === 0) {\n      clearInterval(timerId);\n      dateInputEl.disabled = false;\n\n      iziToast.show({\n        title: 'Success',\n        message: 'Timer is FINISH',\n        messageColor: '#f7f7f7',\n        titleColor: '#f6f6f6',\n        backgroundColor: 'green',\n        close: false,\n        position: 'topRight',\n      });\n    }\n\n    dataTime = convertMs(diffTime);\n\n    addLeadingZero(dataTime);\n  }, 1000);\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["flatpickrOptions","selectedDates","timeForTimer","btnStartTimer","iziToast","userSelectedDate","dateInputEl","textValue","startTimer","time","diffTime","dataTime","flatpickr","addLeadingZero","value","event","convertMs","timerId","ms","days","hours","minutes","seconds"],"mappings":"2FAMA,MAAMA,EAAmB,CACvB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CAGrB,GAFAC,EAAeD,EAAc,CAAC,EAAE,QAAO,EAAK,KAAK,MAE7CC,EAAe,EAAG,CACpBC,EAAc,SAAW,GAEzBC,EAAS,MAAM,CACb,QAAS,qCACT,aAAc,UACd,gBAAiB,MACjB,MAAO,GACP,SAAU,UAClB,CAAO,EACD,MACD,CAEDD,EAAc,SAAW,GACzBE,EAAmBJ,EAAc,CAAC,CACnC,CACH,EAEMK,EAAc,SAAS,cAAc,kBAAkB,EACvDH,EAAgB,SAAS,cAAc,wBAAwB,EAC/DI,EAAY,SAAS,iBAAiB,eAAe,EAE3DJ,EAAc,iBAAiB,QAASK,CAAU,EAElDL,EAAc,SAAW,GAEzB,IAAIE,EAAmB,EACnBH,EAAe,EACfO,EACAC,EACAC,EAEJC,EAAUN,EAAaN,CAAgB,EAEvC,MAAMa,EAAiBC,GAAS,CAC9BP,EAAU,CAAC,EAAE,YAAc,OAAOO,EAAM,IAAI,EAAE,SAAS,EAAG,GAAG,EAC7DP,EAAU,CAAC,EAAE,YAAc,OAAOO,EAAM,KAAK,EAAE,SAAS,EAAG,GAAG,EAC9DP,EAAU,CAAC,EAAE,YAAc,OAAOO,EAAM,OAAO,EAAE,SAAS,EAAG,GAAG,EAChEP,EAAU,CAAC,EAAE,YAAc,OAAOO,EAAM,OAAO,EAAE,SAAS,EAAG,GAAG,CAClE,EAEA,SAASN,EAAWO,EAAO,CACzBN,EAAO,KAAK,MACZC,EAAWL,EAAmBI,EAC9BE,EAAWK,EAAUN,CAAQ,EAE7BG,EAAeF,CAAQ,EAEvBL,EAAY,SAAW,GACvBH,EAAc,SAAW,GAEzB,MAAMc,EAAU,YAAY,IAAM,CAChCR,EAAO,KAAK,MACZC,EAAWL,EAAmBI,EAE1B,KAAK,MAAMC,EAAW,GAAI,IAAM,IAClC,cAAcO,CAAO,EACrBX,EAAY,SAAW,GAEvBF,EAAS,KAAK,CACZ,MAAO,UACP,QAAS,kBACT,aAAc,UACd,WAAY,UACZ,gBAAiB,QACjB,MAAO,GACP,SAAU,UAClB,CAAO,GAGHO,EAAWK,EAAUN,CAAQ,EAE7BG,EAAeF,CAAQ,CACxB,EAAE,GAAI,CACT,CAEA,SAASK,EAAUE,EAAI,CAMrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}